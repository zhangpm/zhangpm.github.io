<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Linux Shell | Pengmiao&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="https://www.bilibili.com/video/av47009997/?p=245 https://www.youtube.com/watch?v=cQepf9fY6cE&amp;amp;list=PLS1QulWo1RIYmaxcEqw5JhK3b-6rgdWO_&amp;amp;index=1 p198 Shell基础1. 脚本执行方式 echo 输出命令；-e可使用转义字符\，例如“\t”制表">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux Shell">
<meta property="og:url" content="http://yoursite.com/2019/07/02/Linux_shell/index.html">
<meta property="og:site_name" content="Pengmiao&#39;s Blog">
<meta property="og:description" content="https://www.bilibili.com/video/av47009997/?p=245 https://www.youtube.com/watch?v=cQepf9fY6cE&amp;amp;list=PLS1QulWo1RIYmaxcEqw5JhK3b-6rgdWO_&amp;amp;index=1 p198 Shell基础1. 脚本执行方式 echo 输出命令；-e可使用转义字符\，例如“\t”制表">
<meta property="og:locale" content="default">
<meta property="og:image" content="g:/git/blog/source/_posts/pic/Bash_hot.JPG">
<meta property="og:image" content="g:/git/blog/source/_posts/pic/Bash_Para.JPG">
<meta property="og:image" content="g:/git/blog/source/_posts/pic/Bash_ParaTest.JPG">
<meta property="og:updated_time" content="2019-07-08T13:07:39.273Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux Shell">
<meta name="twitter:description" content="https://www.bilibili.com/video/av47009997/?p=245 https://www.youtube.com/watch?v=cQepf9fY6cE&amp;amp;list=PLS1QulWo1RIYmaxcEqw5JhK3b-6rgdWO_&amp;amp;index=1 p198 Shell基础1. 脚本执行方式 echo 输出命令；-e可使用转义字符\，例如“\t”制表">
<meta name="twitter:image" content="g:/git/blog/source/_posts/pic/Bash_hot.JPG">
  
    <link rel="alternate" href="/atom.xml" title="Pengmiao&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Pengmiao&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Linux_shell" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/02/Linux_shell/" class="article-date">
  <time datetime="2019-07-02T08:22:33.017Z" itemprop="datePublished">2019-07-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Linux Shell
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://www.bilibili.com/video/av47009997/?p=245" target="_blank" rel="noopener">https://www.bilibili.com/video/av47009997/?p=245</a></p>
<p><a href="https://www.youtube.com/watch?v=cQepf9fY6cE&amp;list=PLS1QulWo1RIYmaxcEqw5JhK3b-6rgdWO_&amp;index=1" target="_blank" rel="noopener">https://www.youtube.com/watch?v=cQepf9fY6cE&amp;list=PLS1QulWo1RIYmaxcEqw5JhK3b-6rgdWO_&amp;index=1</a></p>
<h1 id="p198-Shell基础"><a href="#p198-Shell基础" class="headerlink" title="p198 Shell基础"></a>p198 Shell基础</h1><h2 id="1-脚本执行方式"><a href="#1-脚本执行方式" class="headerlink" title="1. 脚本执行方式"></a>1. 脚本执行方式</h2><ol>
<li><p>echo 输出命令；<code>-e</code>可使用转义字符<code>\</code>，例如“\t”制表符</p>
</li>
<li><p>第一个shell程序：hello.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"Hello World"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>赋予执行权限：chmod +x hello.sh</p>
</li>
<li>运行：./hello.sh<ol>
<li>说明：运行需要相对路径或绝对路径。</li>
<li>相对路径：./代表当前目录；~/代表当前用户主目录</li>
</ol>
</li>
<li>或不用3步，直接bash ./hello.sh</li>
<li>dos2unix 命令，windows格式转化为linux格式</li>
<li>history命令：历史命令</li>
</ol>
<h2 id="2-variables"><a href="#2-variables" class="headerlink" title="2. variables"></a>2. variables</h2><ol>
<li><p><code>$</code>引用变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=Mark</span><br><span class="line"><span class="built_in">echo</span> The name is <span class="variable">$name</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>变量名不能用数字开头</p>
</li>
</ol>
<h2 id="3-Read-using-input"><a href="#3-Read-using-input" class="headerlink" title="3. Read using input"></a>3. Read using input</h2><ol>
<li><p><code>read</code>语句, <code>read name</code>输入变量赋值给name,</p>
</li>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Enter name"</span></span><br><span class="line"><span class="built_in">read</span> name1 name2</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Entered names: <span class="variable">$name1</span>,<span class="variable">$name2</span>"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>多变量：<strong>空格间隔</strong>，输入也是空格间隔</p>
</li>
<li><p>read -p 带提示(prompt)的输入; <code>-sp</code> password,输入不显示字符</p>
</li>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">'username: '</span> username</span><br><span class="line"><span class="built_in">read</span> -sp <span class="string">'password: '</span>password</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"name: <span class="variable">$username</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"pass: <span class="variable">$password</span>"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>单引号：完全按照字符输出；双引号：识别特殊符号，例如<code>$</code>符号作为变量, <code>\</code>转义字符，等</p>
</li>
<li><p>echo 空，换行</p>
</li>
<li><p><code>read -a names</code> 传入array形式. 输出用curly bracket<code>{}</code>括起来.</p>
</li>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Enter name"</span></span><br><span class="line"><span class="built_in">read</span> -a names</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Entered names: <span class="variable">$&#123;names[0]&#125;</span>,<span class="variable">$&#123;names[1]&#125;</span>"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>当变量名和后面的内容都是变量名时，是用花括号括起来避免歧义。如names 和names[0].</p>
</li>
<li><p>read默认输入变量REPLY, 因此若read 不赋值变量，则可取REPLY获取</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$REPLY</span>"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="3-Pass-Argument"><a href="#3-Pass-Argument" class="headerlink" title="3. Pass Argument"></a>3. Pass Argument</h2><ol>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span> <span class="variable">$2</span> <span class="variable">$3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>运行，加入参数<code>./hello.sh aaa bbb ccc</code>。第一个参数传入$1</p>
</li>
<li><p><code>$0</code> is the name of the shell script, here is <code>hello.sh</code></p>
</li>
<li><p>传入数组<code>args=(&quot;$@&quot;)</code>，第一个参数传为args[0]</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">args=(<span class="string">"<span class="variable">$@</span>"</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;args[0]&#125;</span> <span class="variable">$&#123;args[1]&#125;</span> <span class="variable">$&#123;args[2]&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>参数默认传入为$@ （dollar at a rate），因此可直接输出echo \$@  </p>
</li>
<li><p>$# 为参数个数 （dollar hash）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span> <span class="variable">$2</span> <span class="variable">$3</span></span><br><span class="line">args=(<span class="string">"<span class="variable">$@</span>"</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;args[0]&#125;</span> <span class="variable">$&#123;args[1]&#125;</span> <span class="variable">$&#123;args[2]&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$@</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$#</span></span><br></pre></td></tr></table></figure>
<p>输出：</p>
<p>aaa bbb ccc<br>aaa bbb ccc<br>aaa bbb ccc<br>3</p>
</li>
</ol>
<h1 id="p201Shell基础"><a href="#p201Shell基础" class="headerlink" title="p201Shell基础"></a>p201Shell基础</h1><h2 id="1-别名"><a href="#1-别名" class="headerlink" title="1. 别名"></a>1. 别名</h2><ol>
<li><code>alias 别名=‘原命令’</code></li>
<li><code>alias</code> 查询别名</li>
<li>别名永久生效：<ol>
<li>vim /root/.bashrc</li>
<li>写入<code>alias 别名=‘原命令’</code></li>
</ol>
</li>
<li>删除：unalias</li>
</ol>
<h2 id="2-Bash常用快捷键"><a href="#2-Bash常用快捷键" class="headerlink" title="2. Bash常用快捷键"></a>2. Bash常用快捷键</h2><p><img src="G:\git\blog\source\_posts\pic\Bash_hot.JPG" alt="Bash_hot"></p>
<h2 id="3-输入输出重定向："><a href="#3-输入输出重定向：" class="headerlink" title="3.输入输出重定向："></a>3.输入输出重定向：</h2><ol>
<li>标准输出重定向<code>&gt;</code>覆盖；<code>&gt;&gt;</code>追加</li>
<li>标准错误输出重定向：<code>2&gt;</code>,<code>2&gt;&gt;</code></li>
<li>常用：正确错误同时保存：<code>命令 &amp;&gt;(&gt;&gt;) 文件</code></li>
<li>正误分别存 <code>命令&gt;&gt;文件1 2&gt;&gt;文件2</code></li>
<li><code>ls &amp;&gt;/dev/null</code> 输出到黑洞</li>
<li>输入重定向：<code>wc [选项][文件名]</code><ol>
<li>wc &lt; 文件</li>
</ol>
</li>
</ol>
<h2 id="4-bash基本功能"><a href="#4-bash基本功能" class="headerlink" title="4. bash基本功能"></a>4. bash基本功能</h2><ol>
<li>多命令顺序执行：如：<code>命令1;命令2</code><ol>
<li><code>；</code> 多命令顺序执行，无逻辑</li>
<li><code>&amp;&amp;</code> 命令1正确才执行2</li>
<li><code>||</code>命令1正确不执行2，1不正确才执行2</li>
<li>判断命令是否正确：<code>命令 &amp;&amp; echo yes || echo no</code></li>
</ol>
</li>
<li>管道符：<code>|</code>  <code>命令1|命令2</code>，1的正确输出作为2的输入<ol>
<li>ll | more</li>
</ol>
</li>
</ol>
<h2 id="5-通配符wildcard-character"><a href="#5-通配符wildcard-character" class="headerlink" title="5. 通配符wildcard character"></a>5. 通配符<em>wildcard</em> character</h2><ol>
<li>用于匹配文件名，跟正则表达式区分</li>
<li>？匹配一个字符</li>
<li>*任意</li>
<li>[]匹配中括号中的字符，如[abc]，匹配a或b或c</li>
<li>[a-z]匹配a-z的所有字母</li>
<li>[\^]逻辑非，[\^0-9] 匹配不是数字的字符</li>
</ol>
<h2 id="6-Bash-中的特殊符号："><a href="#6-Bash-中的特殊符号：" class="headerlink" title="6. Bash 中的特殊符号："></a>6. Bash 中的特殊符号：</h2><ol>
<li><code>&#39;&#39;</code> 原文字符</li>
<li><code>&quot;&quot;</code> 可读取特殊字符</li>
<li>“``” 反引号，引用系统命令，同$()，不推荐</li>
<li><code>$()</code> 引用系统命令，赋给变量，推荐使用<ol>
<li>eg. <code>echo $(ls)</code></li>
</ol>
</li>
<li><code>#</code>注释</li>
<li><code>$</code>调用变量的值</li>
<li><code>\</code>转义字符，取消特殊符号的作用，变为普通符号</li>
</ol>
<h2 id="7-Bash的变量"><a href="#7-Bash的变量" class="headerlink" title="7. Bash的变量"></a>7. Bash的变量</h2><p>用户自定义变量；环境变量；位置参数变量；预定义变量</p>
<h2 id="7-1-用户自定义变量"><a href="#7-1-用户自定义变量" class="headerlink" title="7.1 用户自定义变量"></a>7.1 用户自定义变量</h2><ol>
<li><p>默认类型为字符串型，数值型需指定</p>
</li>
<li><p>变量用等号连接，<strong>等号两侧不能有空格</strong></p>
</li>
<li><p>变量值有空格，需要用引号括起来</p>
</li>
<li><p>变量值中可以使用转义字符\</p>
</li>
<li><p><strong>变量叠加</strong>：需要引号或花括号括起来：如<code>“$变量名”</code>  或 <code>${变量名}</code>。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">aa=123</span><br><span class="line">aa=<span class="string">"<span class="variable">$aa</span>"</span>456</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$aa</span></span><br><span class="line">输出：123456</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>命令结果作为变量赋值，需要用反引号或<code>$()</code>括起来</p>
</li>
<li><p>环境变量，建议大写</p>
</li>
<li><p>set命令，查看系统中所有变量（所有类型）</p>
</li>
<li><p>unset， 删除变量</p>
</li>
</ol>
<h2 id="7-2-环境变量"><a href="#7-2-环境变量" class="headerlink" title="7.2 环境变量"></a>7.2 环境变量</h2><ol>
<li>在当前和子shell中生效，写入配置文件则对所有shell生效</li>
<li>定义：<code>export 变量名=变量值</code></li>
<li><code>bash</code> 生成子shell, <code>pstree</code>进程树 </li>
<li><code>set</code>查询全部变量；<code>env</code>查看环境变量; <code>unset</code>删除变量</li>
<li>常用环境变量：<code>PATH</code>。自动在PATH路径下搜索命令。例如，把执行程序添加到PATH后，则不需用路径执行，可直接写程序名。<ol>
<li>eg. <code>PATH=&#39;$PATH&#39;:/root</code>变量叠加，临时更改，重启消失。冒号分割。</li>
</ol>
</li>
<li>PS1,定义系统提示符的变量</li>
</ol>
<h2 id="7-3-位置参数变量"><a href="#7-3-位置参数变量" class="headerlink" title="7.3 位置参数变量"></a>7.3 位置参数变量</h2><ol>
<li><p><img src="G:\git\blog\source\_posts\pic\Bash_Para.JPG" alt="Bash_Para"></p>
</li>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sum=$((<span class="variable">$1</span>+<span class="variable">$2</span>))</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$sum</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>$*</code>相当于1个字符串整体；<code>$@</code>相当于一个字符串数组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 循环1次</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"$*"</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="comment">#循环多次</span></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line">	<span class="keyword">do</span> </span><br><span class="line">		<span class="built_in">echo</span> <span class="variable">$j</span></span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./hello.sh 1 2 3 4</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1234</span><br><span class="line"></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="7-4-预定义变量"><a href="#7-4-预定义变量" class="headerlink" title="7.4 预定义变量"></a>7.4 预定义变量</h2><ol>
<li><p><code>$?</code>上一条命令返回状态；0正确，非零错误</p>
</li>
<li><p><code>$$</code>当前进程号</p>
</li>
<li><p><code>$!</code>后台运行的最后一个进程的进程号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"$$"</span></span><br><span class="line">find /root -name hello.sh &amp;</span><br><span class="line"><span class="comment"># &amp;符号为后台执行</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"$!"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>接受键盘输入</p>
<ol>
<li><code>read [选项][变量]</code></li>
<li>-p “aa”： 提示信息</li>
<li>-t 秒数： 等待秒数</li>
<li>-n 字符数：接受字符数到了就执行，不用回车</li>
<li>-s ：隐藏输入显示</li>
</ol>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"please inpute name: "</span> name</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Name is <span class="variable">$name</span>"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n"</span> <span class="comment">#-e激活转义字符，“\n”换行</span></span><br><span class="line"><span class="built_in">read</span> -t 30 -n 1 -p <span class="string">"gender[M/F]: "</span> gender</span><br><span class="line"><span class="built_in">echo</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"sex is <span class="variable">$gender</span>"</span></span><br></pre></td></tr></table></figure>
<h2 id="7-5-数值运算和运算符"><a href="#7-5-数值运算和运算符" class="headerlink" title="7.5 数值运算和运算符"></a>7.5 数值运算和运算符</h2><ol>
<li><p>默认为字符串型，因此数值不可直接相加</p>
</li>
<li><p><code>declare [+/-][选项] 变量名</code>：</p>
<ol>
<li>-： 给变量设定类型属性</li>
<li>+：取消变量的类型属性</li>
<li>-i：设为整型</li>
<li>-x：设为环境变量</li>
<li>-p：查看类型</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aa=11</span><br><span class="line">bb=22</span><br><span class="line"><span class="built_in">declare</span> -i cc=<span class="variable">$aa</span>+<span class="variable">$bb</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>expr或let数值运算工具</p>
<ol>
<li><code>cc=$(expr $aa + $bb)</code> 加号左右两侧空格必要</li>
</ol>
</li>
<li><p><code>$((运算式))</code>或<code>$[运算式]</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cc=$((<span class="variable">$aa</span>+<span class="variable">$bb</span>))</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="7-6-变量测试和内容替换"><a href="#7-6-变量测试和内容替换" class="headerlink" title="7.6 变量测试和内容替换"></a>7.6 变量测试和内容替换</h2><p><img src="G:\git\blog\source\_posts\pic\Bash_ParaTest.JPG" alt="Bash_ParaTest"></p>
<h1 id="8-环境变量"><a href="#8-环境变量" class="headerlink" title="8. 环境变量"></a>8. 环境变量</h1><p><a href="https://www.bilibili.com/video/av47009997/?p=212" target="_blank" rel="noopener">https://www.bilibili.com/video/av47009997/?p=212</a></p>
<h2 id="8-1-环境变量配置文件"><a href="#8-1-环境变量配置文件" class="headerlink" title="8.1 环境变量配置文件"></a>8.1 环境变量配置文件</h2><ol>
<li><p>source命令：<code>source 配置文件</code> 或<code>. 配置文件</code>，让文件直接生效，不需重新登陆。也可理解为“调用”</p>
</li>
<li><p>例：PATH: <code>PATH=&quot;$PATH&quot;:/root</code>加入root目录</p>
</li>
<li><p>配置文件：</p>
<ol>
<li><code>/etc/profile</code>: /etc/下的文件是对所有用户都生效</li>
<li><code>/etc/profile.d/*.sh</code>：一系列文件</li>
<li><code>/etc/bashrc</code>：命令提示符等</li>
<li><code>~/.bash_profile</code>：~/文件下是当前用户的家目录，只对当前用户生效</li>
<li><code>~/.bashrc</code></li>
</ol>
<p>顺序：<code>/etc/profile</code> -&gt; <code>~/.bash_profile</code>-&gt;<code>~/.bashrc</code> -&gt;<code>/etc/bashrc</code> -&gt;<code>（/etc/profile.d/*.sh）</code>-&gt;命令提示符</p>
</li>
<li><p>向后的文件优先级高，会覆盖前面的变量</p>
</li>
<li><p>本地终端欢迎信息：/etc/issue</p>
</li>
<li><p>远程终端欢迎信息：/etc/issue.net; 只能纯文本，转义符不可用</p>
</li>
<li><p>本地远程据可用，登陆后欢迎信息：/etc/motd</p>
</li>
</ol>
<h1 id="9-正则表达式"><a href="#9-正则表达式" class="headerlink" title="9. 正则表达式"></a>9. 正则表达式</h1><h2 id="9-1-正则表达式和通配符的区别"><a href="#9-1-正则表达式和通配符的区别" class="headerlink" title="9.1 正则表达式和通配符的区别"></a>9.1 正则表达式和通配符的区别</h2><ul>
<li>正则匹配字符串，包含匹配（含有就列出），grep,awk,sed</li>
<li>通配符匹配文件名，完全匹配（只列出完全一样的）,ls,find,cp</li>
</ul>
<h2 id="9-2-常用元字符"><a href="#9-2-常用元字符" class="headerlink" title="9.2 常用元字符"></a>9.2 常用元字符</h2><ul>
<li><code>*</code><strong>前一个字符</strong>匹配0次或任意多次，<strong>0次</strong>也包括。若包含至少一个a,写两个a: <code>aa*</code></li>
<li><code>.</code> 匹配除了换行符外的任意<strong>1个</strong>字符。<ul>
<li>例如：<code>s..d</code>匹配s d中两个字母，如said。</li>
<li><code>s.*d</code>匹配s d中有任意字符</li>
<li><code>.*</code>匹配所有内容</li>
</ul>
</li>
<li><code>^</code> 匹配行首，如 <code>^hello</code>匹配hello开头的行</li>
<li><code>$</code> 匹配行尾，如<code>hello$</code>匹配以hello结尾的行<ul>
<li><code>^$</code>空白行</li>
</ul>
</li>
<li><code>[]</code> 匹配中括号中指定的任意一个字符，如[abc],[0-9]<ul>
<li>grep -n “s[ao]id”，匹配said和soid</li>
</ul>
</li>
<li><code>[^]</code> 匹配除非中括号字符中的一个字符，即<strong>取非</strong>，如[\^0-9]匹配非数字<ul>
<li><code>grep &quot;^[^a-zA-Z]&quot;</code>匹配不以所有字母开头的行</li>
</ul>
</li>
<li><code>\</code> 转义字符，取消特殊符号的含义<ul>
<li><code>grep &quot;\.$&quot;</code>匹配“.”结尾</li>
</ul>
</li>
<li><code>\{n\}</code> 前面的字符连续出现n次（<code>\{</code>即是用转义字符转义了大括号），例如：<code>[0-9]\{4\}</code>匹配4为数字。<code>[1][3-8][0-9]\{9\}</code> 匹配手机号<ul>
<li><code>grep “a\{3\}”</code>匹配连续出现3个a</li>
</ul>
</li>
<li><code>\{n,\}</code>前面的字符出现不小于n次。例如：<code>[a-z]\{2,\}</code>两位以上字母</li>
<li><code>\{n,m\}</code>前面的字符出现n-m次。</li>
</ul>
<h2 id="If-Statement"><a href="#If-Statement" class="headerlink" title="If Statement"></a>If Statement</h2><ol>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ condition ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	statement</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>注意</strong> 条件语句括号内两边必须留有空格，否则报错！</p>
</li>
<li><p>integer comparison</p>
<ol>
<li>-eq  is equal to    if [ “\$a” -eq “\$b” ]</li>
<li>-ne not equal</li>
<li>-gt greater than</li>
<li>-ge greater than or equal to</li>
<li>-lt less than</li>
<li>-le less than or equal to</li>
<li>&lt;,&lt;=,&gt;,&gt;=</li>
</ol>
</li>
<li><p>string comparison</p>
<ol>
<li>= is equal to</li>
<li>== is equal to</li>
<li>!=</li>
<li>&lt;</li>
<li>></li>
<li>-z  is null</li>
</ol>
</li>
<li><p>eg </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">count=10</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$count</span> -eq 10 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"it is true"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>或用两个小括号(parenthesis): <code>if (($a &gt;10))</code>, 无需留空格</p>
</li>
<li></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/02/Linux_shell/" data-id="cjxuei1c400027sukeac6ysc2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2019/06/23/Linux_web/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Linux Web</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/07/02/Linux_shell/">Linux Shell</a>
          </li>
        
          <li>
            <a href="/2019/06/23/Linux_web/">Linux Web</a>
          </li>
        
          <li>
            <a href="/2019/06/20/A_Cooperative_Multi-Agent_DRL/">A Cooperative Multi-Agent Deep Reinforcement Learning Framework for Real-Time Residential Load Scheduling</a>
          </li>
        
          <li>
            <a href="/2019/06/17/Linux_note/">Linux Note</a>
          </li>
        
          <li>
            <a href="/2019/06/16/RDL_李宏毅/">RDL_李宏毅</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<!-- <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->

</body>
</html>